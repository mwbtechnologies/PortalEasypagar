


<div class="row" >
    <div  class="col-lg-12 col-xl-12">
        <div  class="card">
            <div  class="card-header border-bottom-0" style="flex-flow: end;">
                <h2  class="card-title"></h2>
                <div class="col-md-3" >
                    <label class="form-label">Select Organization</label>
                    <ng-multiselect-dropdown [placeholder]="'All Organizations'" [(ngModel)]="selectedOrganization" [data]="OrgList"
                        [settings]="orgSettings" (onSelect)="onselectedOrg($event)"
                        (onDeSelect)="onDeselectedOrg($event)">
                    </ng-multiselect-dropdown>
                </div>
                <div class="col-md-3">
                    <h2 style="font-size: 14px;color:rgb(36, 35, 35);font-family: poppins">
                        Branches</h2>
                    <ng-multiselect-dropdown [placeholder]="'All Branch'"
                        [(ngModel)]="selectedBranchId" [data]="Columns"
                        [settings]="SingleSelectionSettings" (onSelect)="onselectedBranchesChange($event)"
                        (onDeSelect)="onDeselectedBranchesChange($event)">
                    </ng-multiselect-dropdown>
                </div>
                <div class="col-md-3">
                    <h2 style="font-size: 14px;color:rgb(36, 35, 35);font-family: poppins"> Departments</h2>
                    <ng-multiselect-dropdown 
                    [placeholder]="'All Department'"
                    [(ngModel)]="selectedDepartmentId"
                    [data]="DeptColumns"
                    [settings]="SingleSelectionSettings"
                    (onSelect)="onselectedDepartmentsChange($event)"
                    (onDeSelect)="onDeselectedDepartmentsChange($event)"
                    >
                </ng-multiselect-dropdown>
                </div>

                <div class="col-md-3">
                    <h2 style="font-size: 14px;color:rgb(36, 35, 35);font-family: poppins"> List Type</h2>
                    <ng-multiselect-dropdown 
                    [placeholder]="'All'"
                    [(ngModel)]="filteredExpenseHeadId"
                    [data]="ExpenseHeads"
                    [settings]="TypeSelectionSettings"
                    (onSelect)="OnHeadChange($event)"
                    (onDeSelect)="OnDeselectedHeadChange($event)"
                    >
                </ng-multiselect-dropdown>
                </div>
          
                
                <div class="col-md-2">
                <div  class="form-group">
                    <label 
                    class="form-label">Date</label>
                    <input name="example-password-input" placeholder="Select Date" type="date"
                    required StartDate [(ngModel)]="formInput.StartDate" class="form-control">
                      </div>
                      </div>

               

            <div class="col-md-2">
                <div  class="form-group"><br><br>
                <button  id="bEdit" type="button" class="btn btn-primary mb-4" style="border-radius:10px;background-color: #3601b5a3;" (click)="GetExpenseList();"><span
                                                
                    class="fa fa-search"> Search</span></button>
                    </div>
            </div>
                </div>
                </div>
                </div>
   </div>
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Attendance List</h3>
                </div>
                <div class="card-body">
           <div  class="row">
            <div  class="col-md-3 " (click)="onselectedTypeChange('Local')" *ngIf="!ShowLocalExpense">
                <div  class="card bg-success img-card box-primary-shadow">
                    <div  class="card-body"><div  class="d-flex">
                        <div  class="text-white" >
                            <h2  class="mb-0 number-font">{{LocalExpense}}</h2>
                            <p  class="text-white mb-0">Local Expense</p>
                        </div>
                        <div  class="ms-auto">
                            <i  class="fa fa-bar-chart text-white fs-30 me-2 mt-2"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div  class="col-md-3 " (click)="onselectedTypeChange('Local')" *ngIf="ShowLocalExpense">
            <div  class="card bg-success img-card box-primary-shadow">
                <div  class="card-body" style="background-color: #ffffff85;"><div  class="d-flex">
                    <div  class="text-white" >
                        <h2  class="mb-0 number-font">{{LocalExpense}}</h2>
                        <p  class="text-white mb-0">Local Expense</p>
                    </div>
                    <div  class="ms-auto">
                        <i  class="fa fa-bar-chart text-white fs-30 me-2 mt-2"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
            <div  class="col-md-3 " (click)="onselectedTypeChange('Travel')" *ngIf="!ShowTravelExpense">
                <div  class="card bg-danger img-card box-primary-shadow" >
                    <div  class="card-body">
                        <div  class="d-flex">
                        <div  class="text-white">
                            <h2  class="mb-0 number-font">{{TravelExpense}}</h2>
                            <p  class="text-white mb-0">Travel Expense</p>
                        </div>
                        <div  class="ms-auto">
                            <i  class="fa fa-user-times text-white fs-30 me-2 mt-2"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div  class="col-md-3" (click)="onselectedTypeChange('Travel')" *ngIf="ShowTravelExpense">
            <div  class="card bg-danger img-card box-primary-shadow" >
                <div  class="card-body" style="background-color: #ffffff85">
                    <div  class="d-flex">
                    <div  class="text-white">
                        <h2  class="mb-0 number-font">{{TravelExpense}}</h2>
                        <p  class="text-white mb-0">Travel Expense</p>
                    </div>
                    <div  class="ms-auto">
                        <i  class="fa fa-user-times text-white fs-30 me-2 mt-2"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div  class="col-md-3" (click)="onselectedTypeChange('Lodge')" *ngIf="!ShowLodgeExpense">
        <div  class="card bg-secondary img-card box-secondary-shadow">
            <div  class="card-body">
                <div  class="d-flex">
                    <div  class="text-white">
                        <h2  class="mb-0 number-font">{{LodgeExpense}}</h2>
                        <p  class="text-white mb-0">Lodging Expense</p>
                    </div>
                    <div  class="ms-auto">
                        <i  class="fa fa-times text-white fs-30 me-2 mt-2"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
        <div  class="col-md-3" (click)="onselectedTypeChange('Lodge')" *ngIf="ShowLodgeExpense">
            <div  class="card bg-secondary img-card box-secondary-shadow">
                <div  class="card-body" style="background-color: #ffffff85">
                    <div  class="d-flex">
                        <div  class="text-white">
                            <h2  class="mb-0 number-font">{{LodgeExpense}}</h2>
                            <p  class="text-white mb-0">Lodging Expense</p>
                        </div>
                        <div  class="ms-auto">
                            <i  class="fa fa-times text-white fs-30 me-2 mt-2"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div  class="col-md-3" (click)="onselectedTypeChange('DNS')" *ngIf="!ShowDNSExpense">
            <div  class="card bg-success img-card box-success-shadow">
                <div  class="card-body">
                    <div  class="d-flex">
                        <div  class="text-white">
                            <h2  class="mb-0 number-font">{{DNSExpense}}</h2>
                            <p  class="text-white mb-0">DNS Expense</p>
                        </div>
                        <div  class="ms-auto">
                            <i  class="fa fa-clock-o text-white fs-30 me-2 mt-2"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div  class="col-md-3" (click)="onselectedTypeChange('DNS')" *ngIf="ShowDNSExpense">
            <div  class="card bg-success img-card box-success-shadow">
                <div  class="card-body" style="background-color: #ffffff85">
                    <div  class="d-flex">
                        <div  class="text-white">
                            <h2  class="mb-0 number-font">{{DNSExpense}}</h2>
                            <p  class="text-white mb-0">DNS Expense</p>
                        </div>
                        <div  class="ms-auto">
                            <i  class="fa fa-clock-o text-white fs-30 me-2 mt-2"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</div>
          
                     
<div  class="table-responsive">
    <table  id="DataTables_Table_0" table datatable [dtOptions]="dtExportButtonOptions" [dtTrigger]="dtTrigger"
class="table table-striped table-bordered table-hover">
<thead >
<tr >
    <th style="background-color: #3601b51f;text-align: center;">
        <input type="checkbox" name="allTrades" (change)="allCheck($event)">Check All
        </th>
    <th style="background-color: #3601b51f;text-align: center;display:none;">ID</th>
    <th style="background-color: #3601b51f;text-align: center;" >SL No</th>
    <th style="background-color: #3601b51f;text-align: center;" >Expense Head -> Expense Type</th>                                        
    <th style="background-color: #3601b51f;text-align: center;">Source - Destination Location</th>
    <th style="background-color: #3601b51f;text-align: center;">Amount</th>
    <th style="background-color: #3601b51f;text-align: center;">Expense Date</th>
    <th style="background-color: #3601b51f;text-align: center;">Comment</th>
    <th style="background-color: #3601b51f;text-align: center;">Requested On</th>
    <th style="background-color: #3601b51f;text-align: center;">Approved Status</th>
    <th style="background-color: #3601b51f;text-align: center;">Approved Amount</th>
    <th style="background-color: #3601b51f;text-align: center;"> Admin Comment</th>
    <th style="background-color: #3601b51f;text-align: center;">Images</th>
    <th style="background-color: #3601b51f;text-align: center;" >Approve/Reject</th>
</tr>
</thead>
<tbody >
<tr  class="ng-star-inserted" *ngFor="let IL of ExpenseList; let i = index;">
    <td  style="display:none;"><!---->
        <div  class="ng-star-inserted" > {{IL.ExpenseID}} </div><!---->
    </td>
    <td>
        <input type="checkbox" name="{{IL.ExpenseID}}" [(ngModel)]="institutionsList[i].checked">
      </td>
    <td ><!---->
        <div  class="ng-star-inserted"> {{i+1}} </div><!---->
    </td>
   
    <td ><!---->
        <div  class="ng-star-inserted">{{IL.ExpenseTypeName}} ->{{IL.SubExpenseTypeName}} </div>
        <!---->
    </td>
    <td >
        <div  class="ng-star-inserted"> {{IL.SourceLocation}} -> {{IL.DestinationLocation}}</div>
        
    </td>
    <td >
        <div  class="ng-star-inserted"> {{IL.Amount}} </div>
        
    </td>
    <td ><!---->
        <div  class="ng-star-inserted"> {{IL.ExpenseDateTime| date:'yyyy-MM-dd'}} </div>
        <!---->
    </td>
    <td >
        <div  class="ng-star-inserted"> {{IL.CommentByEmployee}} </div>
        
    </td>
    <td >
        <div  class="ng-star-inserted"> {{IL.CreatedDateTime| date:'yyyy-MM-dd'}} </div>
        
    </td>
    <td >
        <div  class="ng-star-inserted"> {{IL.Status}} </div>
        
    </td>
    <td >
        <div  class="ng-star-inserted"> {{IL.ApprovedAmount}} </div>
        
    </td>
    <td >
        <div  class="ng-star-inserted"> {{IL.CommentByAdmin}} </div>
        
    </td>
    <td >
        <div  class="ng-star-inserted" *ngFor="let i in IL.BillImages;">
            <img src="{{i.BillImageUrl}}" height="100px;" width="100px;" /> </div>
        
    </td>
   
   
    <td *ngIf="IL.Status=='Pending'">
        <button (click)="RejectByID(IL.ExpenseID);"
        id="bDel" type="button"
       class="btn mx-3 btn-sm btn-danger ng-star-inserted"><span 
           class="fa fa-trash">Reject</span>
       </button><!---->
       <button (click)="ApproveByID(IL.ExpenseID,IL.Amount);"
        id="bDel" type="button"
       class="btn btn-sm btn-primary ng-star-inserted" style="background-color: #3601b5a3;"><span 
           class="fa fa-plus">Approve</span></button>
              
    </td>
    <td *ngIf="IL.Status=='Approved'">
        <button
        id="bDel" type="button"
       class="btn btn-sm btn-primary ng-star-inserted" style="background-color: #3601b5a3;"><span 
           class="fa fa-plus" aria-disabled="true">Approved</span></button>
          
</td>
<td *ngIf="IL.Status=='Rejected'">
    <button  id="bDel" type="button" class="btn mx-3 btn-sm btn-danger ng-star-inserted">
        <span class="fa fa-plus" aria-disabled="true">Rejected</span></button>
      
</td>
</tr>
<tr *ngIf="!institutionsList">
    <td colspan="10" class="text-center text-danger">No Data Available</td>
  </tr> 
</tbody>
</table> 
</div>
                </div>
            </div>
        </div>
    </div>

<div  *ngIf="!ViewPermission">
                       
    <div  class="page page-h"><div  class="page-content z-index-10"><div  class="container text-center"><div  class="row"><div  class="col-lg-6 col-xl-6 col-md-6 d-block mx-auto"><div  class="text-black"><div  class="display-1 t mb-5"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i></div><h1  class="h2 mb-3">Authorization Error..<i class="fa fa-exclamation" aria-hidden="true"></i></h1><p  class="h4 font-weight-normal mb-7 leading-normal">“Sorry, You Are Not Allowed to Access This Page”</p><a  routerlink="/dashboard/sales-dashboard" class="btn btn-primary" style="border-radius: 10px;background-color: #3601b5a3;"> </a></div></div></div></div></div></div>
</div>
        
        
   
   
   